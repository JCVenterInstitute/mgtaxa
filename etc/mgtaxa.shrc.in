#!/bin/bash
## Environment file for MGTAXA package. 
## This should be sourced on the submit host.
## It will also be sourced at the start of every batch script generated by MGTAXA
## This file is auto-generated and will be overwritten on each install.
## Variables marked below can be also customized in 
## ./.mgtaxa ~/.mgtaxa $MGT_HOME/etc/mgtaxa.local.shrc (in that order of precedence).
## Those files will not be replaced during install.

die() {
    echo "MGTAXA Error: $@"
    exit 1
}

if [ -z "$MGT_RC_ENTERED" ]; then
    export MGT_RC_ENTERED=1
    export MGT_RC=__MGT_RC__
    export MGT_HOME=__MGT_HOME__
    export MGT_BIN=__MGT_BIN__
    export MGT_EXEC_BIN=__MGT_EXEC_BIN__
    export MGT_PY_PATH=__MGT_PY_PATH__
    ## Start of variable block that can be redefined in ~/.mgtaxa
    export MGT_DATA=__MGT_DATA__
    export MGT_TMP=__MGT_TMP__
    export MGT_NCBI_DB=$MGT_DATA
    #this handles the case when we are building w/o environ_rc set
    local_MGT_PREFIX_ENVIRON_RC=__MGT_PREFIX_ENVIRON_RC__
    if [ -n "$local_MGT_PREFIX_ENVIRON_RC" ]; then
        export MGT_PREFIX_ENVIRON_RC=$local_MGT_PREFIX_ENVIRON_RC
    fi
    ## End of variable block that can be redefined in ~/.mgtaxa
    local_configs="$MGT_HOME/etc/mgtaxa.local.shrc $HOME/.mgtaxa .mgtaxa"
    for local_config in $local_configs; do
        if [ -f $local_config ]; then source $local_config; fi
    done
    if [ -z "$MGT_PREFIX_ENVIRON_ENTERED" ]; then
        source __MGT_PREFIX_ENVIRON_RC__
    fi
    export PYTHONPATH=$MGT_PY_PATH:${PYTHONPATH}
    export PATH=${PATH}:${MGT_BIN}:${MGT_EXEC_BIN}

    #export LD_LIBRARY_PATH=$INSTMACH/lib
    #export CA_TOP=${HOME}/work/CA/wgs-assembler
    #export CA_BINDIR=${CA_TOP}/Linux-amd64/bin
    #export SCM_SRC=${CA_TOP}/src/AS_SCM
    #export SVM_TOP=$INSTMACH/svm
    #export SVM_LIBLINEAR_BIN=$SVM_TOP/liblinear
    #export SVM_LIBSVM_BIN=$SVM_TOP/libsvm
    
    export MGT_RC_DONE=1
fi

